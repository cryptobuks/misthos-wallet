// Generated by BUCKLESCRIPT VERSION 3.0.0, PLEASE EDIT WITH CARE
'use strict';

var Block = require("bs-platform/lib/js/block.js");
var Event = require("../application/events/Event.bs.js");
var Json_decode = require("bs-json/src/Json_decode.js");
var Json_encode = require("bs-json/src/Json_encode.js");
var PrimitiveTypes = require("../application/PrimitiveTypes.bs.js");
var Caml_exceptions = require("bs-platform/lib/js/caml_exceptions.js");
var WorkerizedVenture = require("../application/WorkerizedVenture.bs.js");

function encodeReceive(param) {
  if (param.tag) {
    return Json_encode.object_(/* :: */[
                /* tuple */[
                  "type",
                  "NewEvents"
                ],
                /* :: */[
                  /* tuple */[
                    "ventureId",
                    PrimitiveTypes.VentureId[/* encode */2](param[0])
                  ],
                  /* :: */[
                    /* tuple */[
                      "events",
                      Json_encode.list(Event.encode, param[1])
                    ],
                    /* [] */0
                  ]
                ]
              ]);
  } else {
    return Json_encode.object_(/* :: */[
                /* tuple */[
                  "type",
                  "UpdateIndex"
                ],
                /* :: */[
                  /* tuple */[
                    "index",
                    WorkerizedVenture.Index[/* encode */1](param[0])
                  ],
                  /* [] */0
                ]
              ]);
  }
}

var UnknownMessage = Caml_exceptions.create("VentureWorkerMessage.UnknownMessage");

function decodeReceive(raw) {
  var type_ = Json_decode.field("type", Json_decode.string, raw);
  switch (type_) {
    case "NewEvents" : 
        var ventureId = Json_decode.field("ventureId", PrimitiveTypes.VentureId[/* decode */3], raw);
        var events = Json_decode.field("events", (function (param) {
                return Json_decode.list(Event.decode, param);
              }), raw);
        return /* NewEvents */Block.__(1, [
                  ventureId,
                  events
                ]);
    case "UpdateIndex" : 
        return /* UpdateIndex */Block.__(0, [Json_decode.field("index", WorkerizedVenture.Index[/* decode */2], raw)]);
    default:
      throw [
            UnknownMessage,
            raw
          ];
  }
}

var Venture = 0;

exports.Venture = Venture;
exports.encodeReceive = encodeReceive;
exports.UnknownMessage = UnknownMessage;
exports.decodeReceive = decodeReceive;
/* Event Not a pure module */
