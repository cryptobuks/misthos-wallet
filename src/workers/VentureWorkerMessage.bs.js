// Generated by BUCKLESCRIPT VERSION 3.0.0, PLEASE EDIT WITH CARE
'use strict';

var Block = require("bs-platform/lib/js/block.js");
var Event = require("../application/events/Event.bs.js");
var Json_decode = require("bs-json/src/Json_decode.js");
var Json_encode = require("bs-json/src/Json_encode.js");
var PrimitiveTypes = require("../application/PrimitiveTypes.bs.js");
var Caml_exceptions = require("bs-platform/lib/js/caml_exceptions.js");
var WorkerizedVenture = require("../application/WorkerizedVenture.bs.js");

function encodeReceive(param) {
  switch (param.tag | 0) {
    case 0 : 
        return Json_encode.object_(/* :: */[
                    /* tuple */[
                      "type",
                      "UpdateIndex"
                    ],
                    /* :: */[
                      /* tuple */[
                        "index",
                        WorkerizedVenture.Index[/* encode */1](param[0])
                      ],
                      /* [] */0
                    ]
                  ]);
    case 1 : 
        return Json_encode.object_(/* :: */[
                    /* tuple */[
                      "type",
                      "VentureLoaded"
                    ],
                    /* :: */[
                      /* tuple */[
                        "ventureId",
                        PrimitiveTypes.VentureId[/* encode */2](param[0])
                      ],
                      /* :: */[
                        /* tuple */[
                          "events",
                          Json_encode.list(Event.encode, param[1])
                        ],
                        /* [] */0
                      ]
                    ]
                  ]);
    case 2 : 
        return Json_encode.object_(/* :: */[
                    /* tuple */[
                      "type",
                      "NewEvents"
                    ],
                    /* :: */[
                      /* tuple */[
                        "ventureId",
                        PrimitiveTypes.VentureId[/* encode */2](param[0])
                      ],
                      /* :: */[
                        /* tuple */[
                          "events",
                          Json_encode.list(Event.encode, param[1])
                        ],
                        /* [] */0
                      ]
                    ]
                  ]);
    
  }
}

var UnknownMessage = Caml_exceptions.create("VentureWorkerMessage.UnknownMessage");

function decodeReceive(raw) {
  var type_ = Json_decode.field("type", Json_decode.string, raw);
  switch (type_) {
    case "NewEvents" : 
        var ventureId = Json_decode.field("ventureId", PrimitiveTypes.VentureId[/* decode */3], raw);
        var events = Json_decode.field("events", (function (param) {
                return Json_decode.list(Event.decode, param);
              }), raw);
        return /* NewEvents */Block.__(2, [
                  ventureId,
                  events
                ]);
    case "UpdateIndex" : 
        return /* UpdateIndex */Block.__(0, [Json_decode.field("index", WorkerizedVenture.Index[/* decode */2], raw)]);
    case "VentureLoaded" : 
        var ventureId$1 = Json_decode.field("ventureId", PrimitiveTypes.VentureId[/* decode */3], raw);
        var events$1 = Json_decode.field("events", (function (param) {
                return Json_decode.list(Event.decode, param);
              }), raw);
        return /* VentureLoaded */Block.__(1, [
                  ventureId$1,
                  events$1
                ]);
    default:
      throw [
            UnknownMessage,
            raw
          ];
  }
}

var Venture = 0;

exports.Venture = Venture;
exports.encodeReceive = encodeReceive;
exports.UnknownMessage = UnknownMessage;
exports.decodeReceive = decodeReceive;
/* Event Not a pure module */
