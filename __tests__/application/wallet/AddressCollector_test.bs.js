// Generated by BUCKLESCRIPT VERSION 3.0.0, PLEASE EDIT WITH CARE
'use strict';

var Jest = require("@glennsl/bs-jest/src/jest.js");
var Fixtures = require("../../helpers/Fixtures.bs.js");
var Generators = require("../../helpers/Generators.bs.js");
var WalletTypes = require("../../../src/application/wallet/WalletTypes.bs.js");
var Belt_MapString = require("bs-platform/lib/js/belt_MapString.js");
var AddressCollector = require("../../../src/application/wallet/AddressCollector.bs.js");

function constructState(log) {
  return Generators.Log[/* reduce */0]((function (state, param) {
                return AddressCollector.apply(param[/* event */0], state);
              }), AddressCollector.make(/* () */0), log);
}

describe("AddressCollector", (function () {
        return Fixtures.withCached(/* None */0, "AddressCollector", "collects addresses", (function () {
                      return Fixtures.threeUserSessionsArray;
                    }), (function (sessions) {
                      var match = Generators.twoUserSessionsFromArray(sessions);
                      var user1 = match[0];
                      return Generators.Log[/* withIncomeAddressExposed */35](user1, Generators.Log[/* withAccountKeyChainActivated */34](/* None */0, user1, Generators.Log[/* withAccountKeyChainIdentified */33](Generators.Log[/* withCustodianKeyChain */32](/* None */0, /* None */0, user1, Generators.Log[/* withCustodian */27](user1, /* :: */[
                                                  user1,
                                                  /* [] */0
                                                ], Generators.Log[/* withAccount */23](user1, Generators.Log[/* withFirstPartner */16](user1)(Generators.Log[/* createVenture */10](user1))))))));
                    }), (function (_, log) {
                      return Jest.test("has the address", (function () {
                                    return Jest.Expect[/* toEqual */12](/* record */[
                                                /* nCoSigners */1,
                                                /* nPubKeys */1,
                                                /* coordinates : tuple */[
                                                  WalletTypes.AccountIndex[/* fromInt */1](0),
                                                  "fe8c5350b6440fbe11aca1ed14078f081a878b8f5583168bbb89ac18d75f97ea",
                                                  WalletTypes.CoSignerIndex[/* fromInt */1](0),
                                                  WalletTypes.ChainIndex[/* externalChain */9],
                                                  WalletTypes.AddressIndex[/* fromInt */1](0)
                                                ],
                                                /* witnessScript */"512103599363809c8aa6b8e472457a56e367de5d91030520ff4dc5fa01f034833df59b51ae",
                                                /* redeemScript */"00200ae0ad43c6b4696d0651651354867868e33905109ad0186afdb1629c166fdf4b",
                                                /* address */"2N58QKSCL94bLqcYFfFJrq7HdtVC34snTfU"
                                              ], Jest.Expect[/* expect */0](Belt_MapString.getExn(constructState(log)[/* exposedAddresses */2], "2N58QKSCL94bLqcYFfFJrq7HdtVC34snTfU")));
                                  }));
                    }));
      }));

var G = 0;

var L = 0;

var F = 0;

exports.G = G;
exports.L = L;
exports.F = F;
exports.constructState = constructState;
/*  Not a pure module */
