// Generated by BUCKLESCRIPT VERSION 3.0.0, PLEASE EDIT WITH CARE
'use strict';

var Jest = require("@glennsl/bs-jest/src/jest.js");
var Fixtures = require("../../helpers/Fixtures.bs.js");
var Generators = require("../../helpers/Generators.bs.js");
var WalletTypes = require("../../../src/application/wallet/WalletTypes.bs.js");
var Belt_MapString = require("bs-platform/lib/js/belt_MapString.js");
var AddressCollector = require("../../../src/application/wallet/AddressCollector.bs.js");

function constructState(log) {
  return Generators.Log[/* reduce */0]((function (state, param) {
                return AddressCollector.apply(param[/* event */0], state);
              }), AddressCollector.make(/* () */0), log);
}

describe("AddressCollector", (function () {
        return Fixtures.withCached(/* None */0, "AddressCollector", "collects addresses", (function () {
                      return Fixtures.threeUserSessionsArray;
                    }), (function (sessions) {
                      var match = Generators.twoUserSessionsFromArray(sessions);
                      var user1 = match[0];
                      return Generators.Log[/* withIncomeAddressExposed */35](user1, Generators.Log[/* withAccountKeyChainActivated */34](/* None */0, user1, Generators.Log[/* withAccountKeyChainIdentified */33](Generators.Log[/* withCustodianKeyChain */32](/* None */0, /* None */0, user1, Generators.Log[/* withCustodian */27](user1, /* :: */[
                                                  user1,
                                                  /* [] */0
                                                ], Generators.Log[/* withAccount */23](user1, Generators.Log[/* withFirstPartner */16](user1)(Generators.Log[/* createVenture */10](user1))))))));
                    }), (function (_, log) {
                      return Jest.test("has the address", (function () {
                                    return Jest.Expect[/* toEqual */12](/* record */[
                                                /* nCoSigners */1,
                                                /* nPubKeys */1,
                                                /* coordinates : tuple */[
                                                  WalletTypes.AccountIndex[/* fromInt */1](0),
                                                  "594c2d5570c25e865e19a106780e044a2a315ff9c27a2197a19ae3f7cd2bd572",
                                                  WalletTypes.CoSignerIndex[/* fromInt */1](0),
                                                  WalletTypes.ChainIndex[/* externalChain */9],
                                                  WalletTypes.AddressIndex[/* fromInt */1](0)
                                                ],
                                                /* witnessScript */"512102c3f0db0d8765b00e004d92c334bbb39668b26c5514a60e88a03002d7fd5e6dc551ae",
                                                /* redeemScript */"00204b13214aeea3af22812a9dafa3358ab278d3fff5d25d23cfcea859636a9460ff",
                                                /* address */"2MuMHJgoATXXdNCwJk2i6RoFVR78Ma1ngE9"
                                              ], Jest.Expect[/* expect */0](Belt_MapString.getExn(constructState(log)[/* exposedAddresses */2], "2MuMHJgoATXXdNCwJk2i6RoFVR78Ma1ngE9")));
                                  }));
                    }));
      }));

var G = 0;

var L = 0;

var F = 0;

exports.G = G;
exports.L = L;
exports.F = F;
exports.constructState = constructState;
/*  Not a pure module */
